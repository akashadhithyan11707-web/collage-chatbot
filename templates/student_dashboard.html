<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard - College Chatbot</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>College Chatbot</h2>
        </div>
        <nav class="sidebar-nav">
            <a href="{{ url_for('student_dashboard') }}" class="nav-item active">
                <span><i class="fas fa-home"></i></span> Dashboard
            </a>
            <a href="{{ url_for('student_chatbot') }}" class="nav-item">
                <span><i class="fas fa-comments"></i></span> Chatbot
            </a>
            <a href="{{ url_for('profile') }}" class="nav-item">
                <span><i class="fas fa-user"></i></span> Profile
            </a>
            <a href="{{ url_for('about') }}" class="nav-item">
                <span><i class="fas fa-info-circle"></i></span> About
            </a>
            <a href="{{ url_for('logout') }}" class="nav-item">
                <span><i class="fas fa-sign-out-alt"></i></span> Logout
            </a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Top Navbar -->
        <div class="navbar">
            <button class="mobile-menu-toggle" onclick="toggleSidebar()">â˜°</button>
            <h1>Student Dashboard</h1>
            <div class="navbar-user">
                <span>Welcome, {{ user.name or user.email_phone }}</span>
            </div>
        </div>

        <!-- Dashboard Content -->
        <div class="dashboard-content">
            <div class="welcome-card">
                <div class="student-photo-container">
                    {% if user.photo_path %}
                        <img src="{{ url_for('static', filename=user.photo_path) }}" alt="Student Photo" class="student-photo">
                    {% else %}
                        <div class="student-photo-placeholder"><i class="fas fa-user"></i></div>
                    {% endif %}
                </div>
                <div class="welcome-info">
                    <h2>Welcome, {{ user.name or 'Student' }}!</h2>
                    <p class="student-details">
                        {% if user.roll_number %}<strong>Roll Number:</strong> {{ user.roll_number }}<br>{% endif %}
                        {% if user.department %}<strong>Department:</strong> {{ user.department }}<br>{% endif %}
                        <strong>Email/Phone:</strong> {{ user.email_phone }}
                    </p>
                </div>
            </div>

            <!-- Personal Details Section -->
            <div class="info-section">
                <h2><i class="fas fa-user-circle"></i> Personal Details</h2>
                <div class="personal-details-container">
                    <div class="detail-item">
                        <strong>Name:</strong> {{ user.name or 'Not provided' }}
                    </div>
                    {% if user.age %}
                    <div class="detail-item">
                        <strong>Age:</strong> {{ user.age }}
                    </div>
                    {% endif %}
                    {% if user.blood_group %}
                    <div class="detail-item">
                        <strong>Blood Group:</strong> {{ user.blood_group }}
                    </div>
                    {% endif %}
                    {% if parent_details %}
                    <div class="detail-item">
                        <strong>Parent/Guardian:</strong>
                        {% if parent_details.name %}{{ parent_details.name }}{% endif %}
                        {% if parent_details.relationship %} ({{ parent_details.relationship }}){% endif %}
                        {% if parent_details.phone %}<br><small>Phone: {{ parent_details.phone }}</small>{% endif %}
                        {% if parent_details.email %}<br><small>Email: {{ parent_details.email }}</small>{% endif %}
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Subjects Section -->
            <div class="info-section">
                <h2><i class="fas fa-book"></i> Subjects</h2>
                <div class="subjects-container">
                    {% if subjects %}
                        {% for subject in subjects %}
                        <div class="subject-item">
                            <span class="subject-name">{{ subject }}</span>
                        </div>
                        {% endfor %}
                    {% else %}
                        <p class="no-data-text">No subjects registered yet. Contact your teacher for updates.</p>
                    {% endif %}
                </div>
            </div>

            <!-- Subject Notes Section -->
            {% if subject_notes %}
            <div class="info-section">
                <h2>ðŸ“š Subject Notes</h2>
                <div class="subject-notes-container">
                    {% for subject, link in subject_notes.items() %}
                    <div class="subject-note-item">
                        <div class="subject-name">{{ subject }}</div>
                        <a href="{{ link }}" target="_blank" class="subject-note-link">
                            <span>ðŸ“–</span> View Notes
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- General Notes Link Section -->
            {% if user.notes_link %}
            <div class="info-section">
                <h2>ðŸ“š General Study Notes</h2>
                <div class="notes-container">
                    <a href="{{ user.notes_link }}" target="_blank" class="notes-link-btn">
                        <span>ðŸ“–</span> Access Study Notes
                    </a>
                </div>
            </div>
            {% endif %}

            <div class="dashboard-grid">
                <div class="dashboard-card card-hover" onclick="window.location.href='{{ url_for('student_chatbot') }}'">
                    <div class="card-icon"><i class="fas fa-comments"></i></div>
                    <h3>My Chatbot</h3>
                    <p>Ask about your marks, arrears, subjects, and more</p>
                    <button class="btn btn-primary">Open Chatbot</button>
                </div>

                <div class="dashboard-card card-hover" onclick="window.location.href='{{ url_for('profile') }}'">
                    <div class="card-icon"><i class="fas fa-user"></i></div>
                    <h3>My Profile</h3>
                    <p>View your profile information</p>
                    <button class="btn btn-secondary">View Profile</button>
                </div>

                <div class="dashboard-card card-hover" onclick="window.location.href='{{ url_for('about') }}'">
                    <div class="card-icon"><i class="fas fa-info-circle"></i></div>
                    <h3>About College</h3>
                    <p>Learn more about our college</p>
                    <button class="btn btn-secondary">Learn More</button>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
